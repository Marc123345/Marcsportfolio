<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/jpeg" href="https://ik.imagekit.io/qcvroy8xpd/download%20(2).jpeg?updatedAt=1755000851609" />
    <link rel="icon" type="image/x-icon" href="https://ik.imagekit.io/qcvroy8xpd/download%20(2).jpeg?updatedAt=1755000851609" />
    <link rel="apple-touch-icon" href="https://ik.imagekit.io/qcvroy8xpd/apple-touch-icon.png?updatedAt=1750173036120" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    
    <!-- Error recovery script - load this first -->
    <script src="/error-recovery.js"></script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXXXXX');
    </script>
    
    <!-- Font Preloading -->
    <link rel="preconnect" href="https://fonts.cdnfonts.com" crossorigin>
    <style>
      /* Asen Pro font */
      @font-face {
        font-family: 'Asen Pro';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url('https://fonts.cdnfonts.com/s/95478/AsenPro-Regular.woff2') format('woff2');
      }
      
      @font-face {
        font-family: 'Asen Pro';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url('https://fonts.cdnfonts.com/s/95478/AsenPro-Medium.woff2') format('woff2');
      }
      
      @font-face {
        font-family: 'Asen Pro';
        font-style: normal;
        font-weight: 600;
        font-display: swap;
        src: url('https://fonts.cdnfonts.com/s/95478/AsenPro-SemiBold.woff2') format('woff2');
      }
      
      @font-face {
        font-family: 'Asen Pro';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url('https://fonts.cdnfonts.com/s/95478/AsenPro-Bold.woff2') format('woff2');
      }
      
      /* Initial loading styles to prevent FOUC */
      body {
        background-color: #000;
        color: #fff;
        margin: 0;
        font-family: 'Asen Pro', sans-serif;
      }
    </style>
    
    <!-- Preconnect to important domains -->
    <link rel="preconnect" href="https://res.cloudinary.com" crossorigin>
    <link rel="preconnect" href="https://i.imgur.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Primary Meta Tags -->
    <title>Marc Friedman - Full Stack Designer & Developer | Portfolio</title>
    <meta name="title" content="Marc Friedman - Full Stack Designer & Developer | Portfolio">
    <meta name="description" content="Full-stack design and development solutions that transform your vision into exceptional digital experiences. Specializing in web development, UI/UX design, and SaaS solutions.">
    <meta name="author" content="Marc Friedman">
    <meta name="keywords" content="web development, UI/UX design, SaaS development, full stack developer, digital design, Marc Friedman, portfolio, React developer">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://marcfriedmanportfolio.com/">
    <meta property="og:title" content="Marc Friedman - Full Stack Designer & Developer | Portfolio">
    <meta property="og:description" content="Full-stack design and development solutions that transform your vision into exceptional digital experiences.">
    <meta property="og:image" content="https://ik.imagekit.io/qcvroy8xpd/Container%20(6).png?updatedAt=1748950237867">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://marcfriedmanportfolio.com/">
    <meta property="twitter:title" content="Marc Friedman - Full Stack Designer & Developer | Portfolio">
    <meta property="twitter:description" content="Full-stack design and development solutions that transform your vision into exceptional digital experiences.">
    <meta property="twitter:image" content="https://ik.imagekit.io/qcvroy8xpd/Container%20(6).png?updatedAt=1748950237867">

    <!-- Theme Color -->
    <meta name="theme-color" content="#A3D1FF">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-config" content="/browserconfig.xml">

    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//images.unsplash.com">
    <link rel="dns-prefetch" href="//www.googletagmanager.com">
    <link rel="dns-prefetch" href="//res.cloudinary.com">
    <link rel="dns-prefetch" href="//i.imgur.com">
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://ik.imagekit.io/qcvroy8xpd/apple-touch-icon.png?updatedAt=1750173036120">
    <link rel="icon" type="image/jpeg" sizes="32x32" href="https://ik.imagekit.io/qcvroy8xpd/download%20(2).jpeg?updatedAt=1755000851609">
    <link rel="icon" type="image/jpeg" sizes="16x16" href="https://ik.imagekit.io/qcvroy8xpd/download%20(2).jpeg?updatedAt=1755000851609">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#A3D1FF">
    <link rel="shortcut icon" href="https://ik.imagekit.io/qcvroy8xpd/download%20(2).jpeg?updatedAt=1755000851609">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://marcfriedmanportfolio.com/">
    
    <!-- Sitemap -->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">

    <!-- Google Site Verification -->
    <meta name="google-site-verification" content="google65e4eba86e82f0a1" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "url": "https://marcfriedmanportfolio.com/",
        "name": "Marc Friedman - Full Stack Designer & Developer",
        "description": "Full-stack design and development solutions that transform your vision into exceptional digital experiences.",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://marcfriedmanportfolio.com/search?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>
    
    <!-- Advanced chunk loading error handling -->
    <script>
      // Set up global variable for chunk retry
      window.__chunkLoadRetries = {};
      window.__maxRetries = 5; // Increase max retries
      
      // Define public path for dynamic imports
      window.__vite_public_path = window.location.origin + '/';
      
      // Preload critical chunks
      function preloadCriticalChunks() {
        const criticalChunks = [
          '/assets/js/vendor-react-',
          '/assets/js/vendor-framer-',
          '/assets/js/vendor-ui-',
          '/assets/js/vendor-state-'
        ];
        
        // Find script tags that match our critical chunks
        const scripts = document.querySelectorAll('script[src]');
        scripts.forEach(script => {
          const src = script.getAttribute('src');
          if (src) {
            criticalChunks.forEach(chunk => {
              if (src.includes(chunk)) {
                // Create a link preload tag
                const preload = document.createElement('link');
                preload.rel = 'preload';
                preload.as = 'script';
                preload.href = src;
                document.head.appendChild(preload);
              }
            });
          }
        });
      }
      
      // Attempt to preload chunks after initial page load
      window.addEventListener('load', preloadCriticalChunks);
      
      // Handle chunk loading errors
      window.addEventListener('error', function(e) {
        // Check if this is a chunk loading error AND it's a script element
        if (e && e.target && e.target.src && e.target.tagName === 'SCRIPT' &&
            (e.target.src.includes('/assets/') || 
             e.target.src.includes('.js') || 
             e.target.src.includes('chunk'))) {
          console.error('Chunk loading error detected:', e.target.src);
          
          // Get the chunk name from the URL
          const chunkUrl = e.target.src;
          const chunkName = chunkUrl.split('/').pop();
          
          // Limit retries per chunk
          if (!window.__chunkLoadRetries[chunkName]) {
            window.__chunkLoadRetries[chunkName] = 0;
          }
          
          if (window.__chunkLoadRetries[chunkName] < window.__maxRetries) {
            window.__chunkLoadRetries[chunkName]++;
            console.log(`Retrying chunk load (${window.__chunkLoadRetries[chunkName]}/${window.__maxRetries}): ${chunkName}`);
            
            // Create a new script element to retry loading the chunk
            const script = document.createElement('script');
            script.src = chunkUrl + '?retry=' + new Date().getTime(); // Add cache-busting parameter
            script.async = true;
            script.type = 'module';
            script.onerror = function() {
              console.error(`Retry ${window.__chunkLoadRetries[chunkName]} failed for ${chunkName}`);
              if (window.__chunkLoadRetries[chunkName] >= window.__maxRetries) {
                console.log(`Maximum retries reached for ${chunkName}, reloading page`);
                // Add a small delay before reloading
                setTimeout(() => window.location.reload(), 1000);
              }
            };
            document.head.appendChild(script);
            
            // Prevent the default error handling
            e.preventDefault();
          } else if (window.__chunkLoadRetries[chunkName] === window.__maxRetries) {
            // After max retries, reload the page as a last resort
            console.log(`Maximum retries reached for ${chunkName}, reloading page`);
            // Clear cache and reload
            window.location.href = window.location.href + '?nocache=' + new Date().getTime();
          }
        }
      }, true);
      
      // Clear retry counters after successful page load
      window.addEventListener('load', function() {
        setTimeout(() => {
          window.__chunkLoadRetries = {};
          console.log('Page loaded successfully, reset retry counters');
        }, 5000);
      });
      
      // Add service worker for better caching
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/sw.js').then(
            function(registration) {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            },
            function(err) {
              console.log('ServiceWorker registration failed: ', err);
            }
          );
        });
      }
      
      // Prefetch critical routes
      function prefetchRoutes() {
        const routes = [
          '/work',
          '/services',
          '/about',
          '/contact',
          '/blog'
        ];
        
        if ('connection' in navigator && navigator.connection.saveData) {
          console.log('Data saver mode detected, skipping prefetch');
          return;
        }
        
        // Create link prefetch tags
        routes.forEach(route => {
          const link = document.createElement('link');
          link.rel = 'prefetch';
          link.href = route;
          link.as = 'document';
          document.head.appendChild(link);
        });
      }
      
      // Prefetch routes after initial load
      window.addEventListener('load', function() {
        setTimeout(prefetchRoutes, 3000);
      });
      
      // Preload chunks for the current route
      function preloadCurrentRouteChunks() {
        const path = window.location.pathname;
        let chunkPrefix = '';
        
        if (path.includes('/blog')) {
          chunkPrefix = 'page-blog';
        } else if (path.includes('/work')) {
          chunkPrefix = 'page-work';
        } else if (path.includes('/tools')) {
          chunkPrefix = 'page-tools';
        } else if (path.includes('/services')) {
          chunkPrefix = 'page-services';
        }
        
        if (chunkPrefix) {
          const link = document.createElement('link');
          link.rel = 'preload';
          link.href = `/assets/js/${chunkPrefix}-`;
          link.as = 'script';
          document.head.appendChild(link);
        }
      }
      
      // Preload chunks for current route
      window.addEventListener('DOMContentLoaded', preloadCurrentRouteChunks);
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>